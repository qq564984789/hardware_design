<<<<<<< HEAD
### 硬件设计
1. 需求分析
  - STM32最小系统
  - 两个车轮：两个H桥驱动+两个编码器接口
  - 小车姿态：陀螺仪（包括倾角，转向角，角速度等）
  - 人机接口（调试和指示用的外设）：蜂鸣器，LED
  - 下载、调试接口：
  - 系统供电：电源电路
  - 电压检测：电池电压采集电路，做低压报警，防止电池过放。
2. 元器件选型
  - 根据各电路功能模块，确定元器件类型、封装（对于一些比较特殊的电路，即使是电阻电容这样常见的无源器件也需要认真选择然而平衡小车的电路中并不需要一些高精度或很高速的电路部分。）
    - 最小系统：STM32F405RGT6，这款主控是M3内核的，主频可以达到168M,性能非常强悍，非常适合以后的开发和拓展。
	- 两个轮子电机需要两个H桥驱动:
	  - 驱动的选择和电机的参数紧密相关
	  - 选用的电机的正常工作电流360mA
	  - 选择东芝的电机驱动芯片 TB6612:两个集成的H桥，可以同时驱动两个电机，每个H桥可以持续输出 1.2A的电流，PWM频率可以到100kHz，芯片的供电电压最大可以到15V，适合用3S 电池供电，并且芯片封装很小，节省PCB面积。
	- 系统供电：
	  - 小车电池采用3S锂聚合物电池，放电率25C，以后做四轴还能用。电池的满电电压12.6V左右
	  - 电路中需要5V和 3.3V的电源。
	  - 12V-5V降压：MPS公司的DCDC降压芯片MP2482，该芯片支持最大 5A电流输出，最大28V电压输入，0.8至25V可调电压输出，符合需求
	  - 5V-3.3V降压：选用 常见的AMS1117-3.3。
	- 陀螺仪：选用MPU6050模块，模块自带了软件滤波算法，采用串口对外输出数据， 在115200波特率的情况下，每秒钟可以输出100帧的数据。
	3. 原理图设计
  - 最小系统+电源电路+下载调试电路+其他功能模块
4. PCB设计
   - 电源去耦
   - 线宽控制：大电流的走线要尽量宽
   - 开关电源（集成的DCDC电路）的布局布线：
     - 一是芯片的SW的信号是电压高，频率高的开关信号，会对其他电路产生严重的干扰，要尽量远离敏感的电路。
	 - 二是反馈网络是很敏感的网络，尽量避免受干扰。
	 - 三是电源的电流较大，注意线宽和过孔的数量、孔径等，保证有能力通过这么大的电流。
5. 焊接调试
  - 首先焊接电源部分，上电测试电源无问题后在继续其他部分。
=======
### 纭欢璁捐瀹炰緥涓�锛氳嚜骞宠　杞�
1. **闇�姹傚垎鏋�**
  - STM32鏈�灏忕郴缁�
  - 涓や釜杞﹁疆锛氫袱涓狧妗ラ┍鍔�+涓や釜缂栫爜鍣ㄦ帴鍙�
  - 灏忚溅濮挎�侊細闄�铻轰华锛堝寘鎷�捐锛岃浆鍚戣锛岃閫熷害绛夛級
  - 浜烘満鎺ュ彛锛堣皟璇曞拰鎸囩ず鐢ㄧ殑澶栬锛夛細铚傞福鍣紝LED
  - 涓嬭浇銆佽皟璇曟帴鍙ｏ細
  - 绯荤粺渚涚數锛氱數婧愮數璺�
  - 鐢靛帇妫�娴嬶細鐢垫睜鐢靛帇閲囬泦鐢佃矾锛屽仛浣庡帇鎶ヨ锛岄槻姝㈢數姹犺繃鏀俱��
2. **鍏冨櫒浠堕�夊瀷**
  - 鏍规嵁鍚勭數璺姛鑳芥ā鍧楋紝纭畾鍏冨櫒浠剁被鍨嬨�佸皝瑁咃紙瀵逛簬涓�浜涙瘮杈冪壒娈婄殑鐢佃矾锛屽嵆浣挎槸鐢甸樆鐢靛杩欐牱甯歌鐨勬棤婧愬櫒浠朵篃闇�瑕佽鐪熼�夋嫨鐒惰�屽钩琛″皬杞︾殑鐢佃矾涓苟涓嶉渶瑕佷竴浜涢珮绮惧害鎴栧緢楂橀�熺殑鐢佃矾閮ㄥ垎銆傦級
    - 鏈�灏忕郴缁燂細STM32F405RGT6锛岃繖娆句富鎺ф槸M3鍐呮牳鐨勶紝涓婚鍙互杈惧埌168M,鎬ц兘闈炲父寮烘倣锛岄潪甯搁�傚悎浠ュ悗鐨勫紑鍙戝拰鎷撳睍銆�
	- 涓や釜杞瓙鐢垫満闇�瑕佷袱涓狧妗ラ┍鍔�:
	  - 椹卞姩鐨勯�夋嫨鍜岀數鏈虹殑鍙傛暟绱у瘑鐩稿叧
	  - 閫夌敤鐨勭數鏈虹殑姝ｅ父宸ヤ綔鐢垫祦360mA
	  - 閫夋嫨涓滆姖鐨勭數鏈洪┍鍔ㄨ姱鐗� TB6612:涓や釜闆嗘垚鐨凥妗ワ紝鍙互鍚屾椂椹卞姩涓や釜鐢垫満锛屾瘡涓狧妗ュ彲浠ユ寔缁緭鍑� 1.2A鐨勭數娴侊紝PWM棰戠巼鍙互鍒�100kHz锛岃姱鐗囩殑渚涚數鐢靛帇鏈�澶у彲浠ュ埌15V锛岄�傚悎鐢�3S 鐢垫睜渚涚數锛屽苟涓旇姱鐗囧皝瑁呭緢灏忥紝鑺傜渷PCB闈㈢Н銆�
	- 绯荤粺渚涚數锛�
	  - 灏忚溅鐢垫睜閲囩敤3S閿傝仛鍚堢墿鐢垫睜锛屾斁鐢电巼25C锛屼互鍚庡仛鍥涜酱杩樿兘鐢ㄣ�傜數姹犵殑婊＄數鐢靛帇12.6V宸﹀彸
	  - 鐢佃矾涓渶瑕�5V鍜� 3.3V鐨勭數婧愩��
	  - 12V-5V闄嶅帇锛歁PS鍏徃鐨凞CDC闄嶅帇鑺墖MP2482锛岃鑺墖鏀寔鏈�澶� 5A鐢垫祦杈撳嚭锛屾渶澶�28V鐢靛帇杈撳叆锛�0.8鑷�25V鍙皟鐢靛帇杈撳嚭锛岀鍚堥渶姹�
	  - 5V-3.3V闄嶅帇锛氶�夌敤 甯歌鐨凙MS1117-3.3銆�
	- 闄�铻轰华锛氶�夌敤MPU6050妯″潡锛屾ā鍧楄嚜甯︿簡杞欢婊ゆ尝绠楁硶锛岄噰鐢ㄤ覆鍙ｅ澶栬緭鍑烘暟鎹紝 鍦�115200娉㈢壒鐜囩殑鎯呭喌涓嬶紝姣忕閽熷彲浠ヨ緭鍑�100甯х殑鏁版嵁銆�
3. **鍘熺悊鍥捐璁�**
  - 鏈�灏忕郴缁�+鐢垫簮鐢佃矾+涓嬭浇璋冭瘯鐢佃矾+鍏朵粬鍔熻兘妯″潡
4. **PCB璁捐**
   - 鐢垫簮鍘昏��
   - 绾垮鎺у埗锛氬ぇ鐢垫祦鐨勮蛋绾胯灏介噺瀹�
   - 寮�鍏崇數婧愶紙闆嗘垚鐨凞CDC鐢佃矾锛夌殑甯冨眬甯冪嚎锛�
     - 涓�鏄姱鐗囩殑SW鐨勪俊鍙锋槸鐢靛帇楂橈紝棰戠巼楂樼殑寮�鍏充俊鍙凤紝浼氬鍏朵粬鐢佃矾浜х敓涓ラ噸鐨勫共鎵帮紝瑕佸敖閲忚繙绂绘晱鎰熺殑鐢佃矾銆�
	 - 浜屾槸鍙嶉缃戠粶鏄緢鏁忔劅鐨勭綉缁滐紝灏介噺閬垮厤鍙楀共鎵般��
	 - 涓夋槸鐢垫簮鐨勭數娴佽緝澶э紝娉ㄦ剰绾垮鍜岃繃瀛旂殑鏁伴噺銆佸瓟寰勭瓑锛屼繚璇佹湁鑳藉姏閫氳繃杩欎箞澶х殑鐢垫祦銆�
5. **鐒婃帴璋冭瘯**
  - 棣栧厛鐒婃帴鐢垫簮閮ㄥ垎锛屼笂鐢垫祴璇曠數婧愭棤闂鍚庡湪缁х画鍏朵粬閮ㄥ垎銆�
>>>>>>> f2c50c160fc89fb4cb8c29e7cde94a33064a362e
  
  
[璇︽儏鍙傞槄](http://mp.weixin.qq.com/s/tcg2XQSW6ukDPoeInvpyHw)

